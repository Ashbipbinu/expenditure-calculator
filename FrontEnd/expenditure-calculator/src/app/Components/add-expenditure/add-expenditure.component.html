<div class="w-full p-4">
  <h2 class="text-2xl font-bold mb-4 text-center">Add Expense</h2>

  <!-- Category and Total Amount Form -->
  <div class="flex flex-col mb-4">
    <h3 class="text-md font-bold mb-2">Insert Category</h3>
    <form [formGroup]="categoryForm" (ngSubmit)="addCategoryAndAmount()">
      <div class="flex flex-col mb-4 w-1/2">
        <label class="text-sm mb-2" for="newCategory">New Category</label>
        <input
          formControlName="category"
          id="category"
          type="text"
          class="p-2 rounded-md border border-gray-300"
        />
      </div>
     
      <!-- Selected Categories Chips -->
      <div class="flex  flex-wrap mb-4">
        <div
          *ngFor="let category of selectedCategories"
          class="mr-2 mt-2  flex flex-wrap"
        >
          <span class="bg-blue-100 text-blue-800 py-2 px-4 rounded-md flex space-x-5 items-center gap-3">
            <p class="text-lg font-semibold">{{ category.category }}</p>
            <fa-icon
              (click)="removeCategory(category._id)"
              [icon]="faTimes"
              class="text-red-500 cursor-pointer mt-1"
            ></fa-icon>
          </span>
        </div>
      </div>
      <button
        type="submit"
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
      >
        Insert Category
      </button>
    </form>
  </div>

  <!-- Expense Form -->
  <form
    [formGroup]="expenseForm"
    (ngSubmit)="addExpense()"
    *ngIf="categoryAdded"
  >
    <div class="flex mb-4">
      <div class="flex flex-col mr-4 w-1/2">
        <label class="text-sm mb-2" for="name">Expense Name</label>
        <input
          formControlName="name"
          id="name"
          type="text"
          class="p-2 rounded-md border border-gray-300"
        />
      </div>
      <div class="flex flex-col ml-4 w-1/2">
        <label class="text-sm mb-2" for="amount">Amount</label>
        <input
          formControlName="amount"
          id="amount"
          type="number"
          class="p-2 rounded-md border border-gray-300"
        />
      </div>
    </div>
    <div class="flex mb-4">
      <div class="flex flex-col mr-4 w-1/2">
        <label class="text-sm mb-2" for="date">Date</label>
        <input
          formControlName="date"
          id="date"
          type="date"
          class="p-2 rounded-md border border-gray-300"
        />
      </div>
      <div class="flex flex-col ml-4 w-1/2">
        <label class="text-sm mb-2" for="category">Category</label>
        <select
          formControlName="categories"
          id="category"
          class="p-2 rounded-md border border-gray-300"
        >
          <option value="">Select Category</option>
          <option *ngFor="let category of categories" [value]="category.category">
            {{ category.category }}
          </option>
        </select>
      </div>
    </div>
    <button
      type="submit"
      class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
    >
      Add Expense
    </button>
  </form>
  <div *ngIf="error">
    <p class="text-lg text-red-600 font-bold">{{error}}</p>
  </div>
</div>
